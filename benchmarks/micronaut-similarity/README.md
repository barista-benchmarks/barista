# Micronaut Text-Similarity Benchmark

This benchmark exposes a simple `/similarity/order` POST endpoint at 8002 that accepts a JSON message
with the list of texts, and returns a JSON response
that contains the similarity metrics between for all pairs of texts.
The workload tester sends in a list of essays, each holding several thousand words.
The code in this benchmark is based on the project generated by the following launcher:
https://micronaut.io/launch


# Building The Benchmark

To build the benchmark, run: `mvn package`

# Building The Native-Image

To build the native-image of the benchmark, run: `mvn package -Dpackaging=native-image`

## Benchmarking:

Benchmarking is currently supported with `mx`. There are two benchmarking tools available:

- Wrk (used to measure throughput)
- Wrk2 (used to measure latency).

For each benchmarking tool, one or more workloads are available (check `workloads` directory).

To start the benchmark, simply use `mx benchmark` followed by the benchmark name (`similarity`),
followed by the workloads. As an example, the two following lines use the same benchmark
and workload in two different JVMs (`server` and `native-image`).

- `mx benchmark micronaut-similarity-wrk:similarity -- --jvm=server`
- `mx benchmark micronaut-similarity-wrk:similarity -- --jvm=native-image`

